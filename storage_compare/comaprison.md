# Сравнение хранилищ на базе Clickhouse и Vertica

## Схема данных для Clickhouse

| Столбец     | Тип данных | Описание                         | Пример                               |
|-------------|------------|----------------------------------|--------------------------------------|
| service     | String     | Служба-источник сообщения        | UGC                                  |
| user        | UUID       | UUID пользователя                | cbef42ea-e8c4-4e61-8cbd-67e83a4c1317 |
| timestamp   | DateTime   | Дата и время получения сообщения | 2005-05-16 05:50:47                  |
| entity_type | String     | Тип сущности сообщения           | Movie                                |
| entity      | String     | Сущность сообщения               | c4a7cf43-a54e-44b7-946e-915a94aec8b7 |
| action      | String     | Действие                         | watch_start                          |

## Схема данных для Vertica

| Столбец     | Тип данных   | Описание                         | Пример                               |
|-------------|--------------|----------------------------------|--------------------------------------|
| service     | VARCHAR(256) | Служба-источник сообщения        | UGC                                  |
| user_UUID   | UUID         | UUID пользователя                | cbef42ea-e8c4-4e61-8cbd-67e83a4c1317 |
| timestamp   | DATETIME     | Дата и время получения сообщения | 2005-05-16 05:50:47                  |
| entity_type | VARCHAR(256) | Тип сущности сообщения           | Movie                                |
| entity      | VARCHAR(256) | Сущность сообщения               | c4a7cf43-a54e-44b7-946e-915a94aec8b7 |
| action      | VARCHAR(256) | Действие                         | watch_start                          |

## Таблица сравнения

| Хранилище  | Всего записано записей | Общее время записи | Среднее время вставки 1000 записей |
|------------|------------------------|--------------------|------------------------------------|
| Clickhouse | 10 000 000             | 50 минут           | 300мс                              |
| Vertica    | 10 000 000             | 600 минут          | ~3с                                | 

## Вывод

Clickhouse закрывает все необходимые потребности в скорости записи и обработки поступающих метрик, при этом, работает
без какой-либо сложной дополнительной конфигурации почти "из коробки".
При этом, в отличие
от Vertica, он является бесплатным отечественным решением, что не только сокращает общие затраты на внедрение и
обслуживание, но и уменьшает риски
от использования иностранного ПО в текущий геополитической обстановке.
