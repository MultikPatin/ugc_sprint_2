@startuml
'https://plantuml.com/sequence-diagram

skinparam componentStyle uml2
skinparam stereotypePosition bottom
skinparam ParticipantPadding 20
skinparam BoxPadding 10

hide footbox

header %date("dd MMMM YYYY")
title Movies UGC Sequence Events

actor Client
participant App <<route>>
participant EventHandler
queue Kafka


Client -> App: POST http://127.0.0.1:8000/events?key=str \n-d {data: dict}
App -> EventHandler: new(topic: str, key: str, data: dict)
note over EventHandler
{
  service: str
  user: uuid
  timestamp: datetime
  entity_type: str
  entity: str
  action: str
}
end note
EventHandler -> Kafka: producer.send(topic: str, value: bytes, key: bytes)

@enduml